CREATE TABLE `visitor_tracking` (
	`id` int AUTO_INCREMENT NOT NULL,
	`session_id` varchar(64) NOT NULL,
	`user_id` int,
	`visit_timestamp` timestamp NOT NULL DEFAULT (now()),
	`ip_address` varchar(45),
	`ip_version` varchar(10),
	`isp` varchar(255),
	`organization` varchar(255),
	`asn` varchar(50),
	`connection_type` varchar(50),
	`effective_connection_type` varchar(20),
	`download_speed` decimal(10,2),
	`upload_speed` decimal(10,2),
	`rtt` int,
	`is_vpn` boolean,
	`is_proxy` boolean,
	`is_tor` boolean,
	`is_datacenter` boolean,
	`mobile_carrier` varchar(100),
	`network_quality` int,
	`country` varchar(100),
	`country_code` varchar(10),
	`region` varchar(100),
	`region_code` varchar(20),
	`city` varchar(100),
	`postal_code` varchar(20),
	`latitude` varchar(20),
	`longitude` varchar(20),
	`timezone` varchar(50),
	`utc_offset` varchar(10),
	`metro_code` varchar(20),
	`continent` varchar(50),
	`continent_code` varchar(10),
	`currency` varchar(10),
	`calling_code` varchar(10),
	`capital_city` varchar(100),
	`distance_from_server` int,
	`local_time` varchar(50),
	`device_type` varchar(50),
	`device_brand` varchar(100),
	`device_model` varchar(100),
	`cpu_architecture` varchar(50),
	`cpu_cores` int,
	`gpu_vendor` varchar(100),
	`gpu_renderer` varchar(255),
	`device_memory` int,
	`battery_level` int,
	`is_charging` boolean,
	`has_touchscreen` boolean,
	`device_orientation` varchar(20),
	`has_accelerometer` boolean,
	`has_gyroscope` boolean,
	`has_vibration` boolean,
	`has_bluetooth` boolean,
	`has_nfc` boolean,
	`screen_width` int,
	`screen_height` int,
	`screen_resolution` varchar(20),
	`available_screen_width` int,
	`available_screen_height` int,
	`color_depth` int,
	`pixel_depth` int,
	`pixel_ratio` decimal(3,2),
	`dpi` int,
	`has_hdr` boolean,
	`refresh_rate` int,
	`viewport_width` int,
	`viewport_height` int,
	`zoom_level` int,
	`is_dark_mode` boolean,
	`browser_name` varchar(50),
	`browser_version` varchar(50),
	`browser_major_version` int,
	`browser_engine` varchar(50),
	`browser_engine_version` varchar(50),
	`browser_language` varchar(10),
	`user_agent` text,
	`cookies_enabled` boolean,
	`local_storage_available` boolean,
	`session_storage_available` boolean,
	`indexed_db_available` boolean,
	`webgl_support` boolean,
	`webgl_version` varchar(10),
	`webrtc_support` boolean,
	`service_worker_support` boolean,
	`push_notification_support` boolean,
	`geolocation_api_support` boolean,
	`camera_permission` varchar(20),
	`microphone_permission` varchar(20),
	`clipboard_permission` varchar(20),
	`os_name` varchar(50),
	`os_version` varchar(50),
	`os_architecture` varchar(20),
	`os_language` varchar(10),
	`platform` varchar(50),
	`platform_version` varchar(50),
	`do_not_track` boolean,
	`ad_blocker_detected` boolean,
	`third_party_cookies_blocked` boolean,
	`is_incognito` boolean,
	`browser_fingerprint` varchar(64),
	`canvas_fingerprint` varchar(64),
	`webgl_fingerprint` varchar(64),
	`audio_fingerprint` varchar(64),
	`font_fingerprint` varchar(64),
	`installed_fonts` text,
	`installed_plugins` text,
	`detected_extensions` text,
	`https_enabled` boolean,
	`referrer_policy` varchar(50),
	`mouse_movements` int,
	`total_clicks` int,
	`rage_clicks` int,
	`dead_clicks` int,
	`scroll_depth` int,
	`max_scroll_depth` int,
	`scroll_speed` varchar(20),
	`time_on_page` int,
	`active_time` int,
	`idle_time` int,
	`tab_switches` int,
	`tab_blur_count` int,
	`copy_events` int,
	`paste_events` int,
	`text_selections` int,
	`form_fields_focused` int,
	`form_fields_completed` int,
	`form_completion_time` int,
	`form_errors` int,
	`backspace_count` int,
	`autocomplete_used` boolean,
	`exit_intent` boolean,
	`entry_page` varchar(512),
	`current_page` varchar(512),
	`exit_page` varchar(512),
	`page_sequence` text,
	`pages_viewed` int,
	`session_duration` int,
	`is_bounce` boolean,
	`is_new_visitor` boolean,
	`is_returning_visitor` boolean,
	`previous_session_count` int,
	`days_since_first_visit` int,
	`days_since_last_visit` int,
	`visit_frequency` varchar(20),
	`lifetime_page_views` int,
	`lifetime_session_count` int,
	`average_session_duration` int,
	`total_time_on_site` int,
	`engagement_level` varchar(20),
	`referrer_url` varchar(512),
	`referrer_domain` varchar(255),
	`traffic_source` varchar(50),
	`search_engine` varchar(50),
	`search_keywords` varchar(255),
	`utm_source` varchar(255),
	`utm_medium` varchar(255),
	`utm_campaign` varchar(255),
	`utm_term` varchar(255),
	`utm_content` varchar(255),
	`gclid` varchar(255),
	`fbclid` varchar(255),
	`msclkid` varchar(255),
	`ad_network` varchar(100),
	`ad_group_id` varchar(100),
	`ad_creative_id` varchar(100),
	`ad_match_type` varchar(20),
	`ad_device_targeting` varchar(20),
	`ad_network_type` varchar(50),
	`ad_position` varchar(20),
	`keyword_bid` decimal(10,2),
	`email_campaign_id` varchar(100),
	`affiliate_id` varchar(100),
	`influencer_code` varchar(100),
	`social_media_post_id` varchar(100),
	`page_load_time` int,
	`dns_lookup_time` int,
	`tcp_connection_time` int,
	`tls_handshake_time` int,
	`time_to_first_byte` int,
	`dom_content_loaded_time` int,
	`dom_interactive_time` int,
	`dom_complete_time` int,
	`window_load_time` int,
	`first_paint` int,
	`first_contentful_paint` int,
	`largest_contentful_paint` int,
	`first_input_delay` int,
	`cumulative_layout_shift` decimal(5,3),
	`time_to_interactive` int,
	`total_blocking_time` int,
	`resource_load_time` int,
	`api_response_time` int,
	`javascript_execution_time` int,
	`render_time` int,
	`user_registration_date` timestamp,
	`email_verified` boolean,
	`phone_verified` boolean,
	`account_status` varchar(20),
	`user_role` varchar(20),
	`subscription_tier` varchar(20),
	`last_login_timestamp` timestamp,
	`total_login_count` int,
	`profile_completion_percent` int,
	`has_avatar` boolean,
	`preferred_language` varchar(10),
	`teams_created_count` int,
	`contests_joined_count` int,
	`achievements_unlocked_count` int,
	`total_points_earned` int,
	`visit_date` varchar(20),
	`visit_hour` int,
	`visit_day_of_week` varchar(10),
	`visit_week_of_year` int,
	`visit_month` int,
	`visit_quarter` int,
	`visit_year` int,
	`is_holiday` boolean,
	`holiday_name` varchar(100),
	`is_cricket_match_day` boolean,
	`weather_condition` varchar(50),
	`temperature` decimal(5,2),
	`bot_detection_score` int,
	`is_likely_bot` boolean,
	`is_headless_browser` boolean,
	`automation_tool_detected` varchar(100),
	`is_known_bot_user_agent` boolean,
	`honeypot_triggered` boolean,
	`impossible_travel` boolean,
	`is_duplicate_session` boolean,
	`click_fraud_indicators` int,
	`form_spam_indicators` int,
	`suspicious_activity_flags` text,
	`engagement_score` int,
	`quality_score` int,
	`predicted_clv` decimal(10,2),
	`churn_risk_score` int,
	`lead_score` int,
	`segment_assignment` varchar(100),
	`ab_test_variant` varchar(50),
	`personalization_rules` text,
	`recommendation_algorithm` varchar(100),
	`content_category_preferences` text,
	`created_at` timestamp NOT NULL DEFAULT (now()),
	`updated_at` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,
	CONSTRAINT `visitor_tracking_id` PRIMARY KEY(`id`)
);
--> statement-breakpoint
CREATE INDEX `session_idx` ON `visitor_tracking` (`session_id`);--> statement-breakpoint
CREATE INDEX `user_idx` ON `visitor_tracking` (`user_id`);--> statement-breakpoint
CREATE INDEX `ip_idx` ON `visitor_tracking` (`ip_address`);--> statement-breakpoint
CREATE INDEX `timestamp_idx` ON `visitor_tracking` (`visit_timestamp`);--> statement-breakpoint
CREATE INDEX `country_idx` ON `visitor_tracking` (`country`);--> statement-breakpoint
CREATE INDEX `city_idx` ON `visitor_tracking` (`city`);--> statement-breakpoint
CREATE INDEX `device_type_idx` ON `visitor_tracking` (`device_type`);--> statement-breakpoint
CREATE INDEX `browser_idx` ON `visitor_tracking` (`browser_name`);--> statement-breakpoint
CREATE INDEX `traffic_source_idx` ON `visitor_tracking` (`traffic_source`);--> statement-breakpoint
CREATE INDEX `utm_campaign_idx` ON `visitor_tracking` (`utm_campaign`);